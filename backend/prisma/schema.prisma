generator client {
  provider = "prisma-client-js"
}

generator erd {
  provider = "prisma-erd-generator"
  output   = "../ERD.md"
}

datasource db {
  provider = "postgresql"
}

enum UserRole {
  user
  admin
}

model User {
  id              String            @id @default(uuid())
  email           String            @unique
  passwordHash    String?           @map("password_hash")
  displayName     String?           @map("display_name")
  googleId        String?           @unique @map("google_id")
  role            UserRole          @default(user)
  createdAt       DateTime          @default(now()) @map("created_at")
  updatedAt       DateTime          @updatedAt @map("updated_at")
  timezonePresets TimezonePreset[]

  @@map("users")
}

model TimezonePreset {
  id          String           @id @default(uuid())
  userId      String           @map("user_id")
  name        String
  description String?          @db.Text
  isFavorite  Boolean          @default(false) @map("is_favorite")
  createdAt   DateTime         @default(now()) @map("created_at")
  updatedAt   DateTime         @updatedAt @map("updated_at")
  user        User             @relation(fields: [userId], references: [id], onDelete: Cascade)
  timezones   PresetTimezone[]

  @@map("timezone_presets")
}

model PresetTimezone {
  id                 String         @id @default(uuid())
  presetId           String         @map("preset_id")
  timezoneIdentifier String         @map("timezone_identifier")
  displayLabel       String?        @map("display_label")
  position           Int            @default(0)
  startTime          String?        @map("start_time")
  endTime            String?        @map("end_time")
  createdAt          DateTime       @default(now()) @map("created_at")
  preset             TimezonePreset @relation(fields: [presetId], references: [id], onDelete: Cascade)

  @@map("preset_timezones")
}

